# 博客创建过程

1、创建目录层级**

```python
project/
	App/
    	templates/   模板 
        	common/
            	base.html
        static/		静态
        	upload/
        models/		模型
        	__init__.py
        views/		视图
        	__init__.py
        forms/		表单
        	__init__.py
        extensions.py	加载扩展库
        settings.py		配置文件
        email.py		邮件
        __init__.py		包的初始化
        
    migrations/ #迁移目录
    manage.py #启动
```

2、创建步骤

1、manage.py下设置启动项

```python
#1、manage.py下设置启动项

from flask_script import Manager
from App import create_app #导入app

app = create_app('default') #加载配置，在App/__init__.py下设置
manager = Manager(app)

if __name__ == '__main__':
    manager.run()
    
```

2、App/____init____.py

```python
from flask import Flask

def create_app(configName):
    app = Flask(__name__)

    return app
```

3、配置文件settings.py

```python
class Config:
    SECRET_KEY = 'secret_key'
    SQLALCHEMY_TRACK_MODIFICATIONS=False

#开发环境
class DevelopmentConfig(Config):               #用户名 密码   ip       端口号  数据库   
    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:caijing123@127.0.0.1:3306/python1807'
    DEBUG = True  #开启调试模式

#测试环境
class TestingConfig(Config):
    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:123456@127.0.0.1:3306/test_blog'
    DEBUG = False

#生产环境
class ProductionConfig(Config):
    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://root:123456@127.0.0.1:3306/blog'
    DEBUG = False

#配置的字典
configDict = {
    'default':DevelopmentConfig,
    'development':DevelopmentConfig,
    'testing':TestingConfig,
    'production':ProductionConfig
}
```

4、将配置文件及环境设置配置给App/____init____.py

```python
from flask import Flask
from .settings import configDict #配置字典

def create_app(configName):
    app = Flask(__name__)
    app.config.from_object(configDict[configName])
   
    return app

```

5、第三方扩展库配置extensions.py

```python
from flask_bootstrap import Bootstrap
bootstrap = Bootstrap()

#初始化所有第三方扩展库
def config_extension(app):
    bootstrap.init_app(app)
```

6、将第三方扩展库导入App/____init____.py

```python
from flask import Flask
from .settings import configDict #配置字典
from .extensions import config_extension #第三方扩展库加载

def create_app(configName):
    app = Flask(__name__)
    app.config.from_object(configDict[configName])
    config_extension(app) #第三方扩展库初始化App
  
    return app
```

7、创建蓝本views/main.py

```python
from flask import Blueprint

main = Blueprint('main',__name__)

@main.route('/')
def index():
    return 'index'
```

8、将蓝本导入views/____init____.py

```python
from .main import main

#配置蓝本列表
blueprin_config = [
    (main,'main/'),
]

#蓝本的注册
def blueprin_register(app):
    for blue,prefix in blueprin_config:
        app.register_blueprint(blue,url_prefix=prefix)
```

9、将views/____init____.py导入APP/____init____.py

```python
from flask import Flask
from .settings import configDict #配置字典
from .extensions import config_extension #第三方扩展库加载
from .views import blueprin_register #注册蓝本

def create_app(configName):
    app = Flask(__name__)
    app.config.from_object(configDict[configName])
    config_extension(app) #第三方扩展库初始化App
    blueprin_register(app) #注册蓝本

    return app
```

